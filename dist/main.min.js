"use strict";var burger=document.querySelector(".burger"),menu=document.querySelector(".menu");burger.addEventListener("click",function(){menu.classList.contains("menu--active")?(menu.classList.remove("menu--active"),burger.classList.remove("burger--active")):(menu.classList.add("menu--active"),burger.classList.add("burger--active"))});var openItem=function(e){var t=e.closest(".team__item"),n=t.find(".team__content"),a=n.find(".team__content-block").height(),o=t.find(".team__triangle");t.addClass("active"),n.height(a),o.addClass("open")},closeEveryItem=function(e){var t=e.find(".team__content"),n=e.find(".team__item"),a=e.find(".team__triangle");n.removeClass("active"),t.height(0),a.removeClass("open")};$(".team__name").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".team");t.closest(".team__item").hasClass("active")?closeEveryItem(n):(closeEveryItem(n),openItem(t))});var mesureWidth=function(e){var t=0,n=$(window).width(),a=e.closest(".accordeon__list").find(".accordeon__trigger"),o=a.width(),i=a.width()*a.length,r=e.find(".accordeon__container"),c=parseInt(r.css("padding-left")),s=parseInt(r.css("padding-right")),l=window.matchMedia("(max-width: 481px)").matches,d=window.matchMedia("(min-width: 480px) and (max-width: 768px)").matches;return{container:t=l?n-o:d?n-i:530,textContainer:t-c-s}},closeEveryItemInContainer=function(e){var t=e.find(".accordeon__item"),n=e.find(".accordeon__content"),a=e.siblings(".section__title-menu");t.removeClass("active"),n.width(0),a.removeClass("active"),isMobile&&t.siblings().removeClass("zero")},openItemAcc=function(e){var t=e.find(".accordeon__content"),n=mesureWidth(e),a=e.find(".accordeon__container"),o=e.closest(".accordeon__list").siblings(".section__title-menu");e.addClass("active"),t.width(n.container),a.width(n.textContainer),o.addClass("active"),isMobile&&e.siblings().addClass("zero")};$(".accordeon__trigger").click(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".accordeon__item"),a=n.hasClass("active"),o=t.closest(".accordeon__list");a?closeEveryItemInContainer(o):(closeEveryItemInContainer(o),openItemAcc(n))}),$(".accordeon-close").click(function(e){e.preventDefault(),closeEveryItemInContainer($(".accordeon__list"))});var slider=$(".slider").bxSlider({pager:!1,controls:!1});$(".slider-btn--left").click(function(e){e.preventDefault(),slider.goToPrevSlide()}),$(".slider-btn--right").click(function(e){e.preventDefault(),slider.goToNextSlide()}),$(".review-switcher__link").on("click",function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".review-switcher").index(),a=$(".review").eq(n),o=t.closest(".review-switcher");a.addClass("active").siblings().removeClass("active"),o.addClass("active").siblings().removeClass("active")});var myMap,validateFields=function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length};$(".form").submit(function(e){e.preventDefault();var t=$("body"),n=$(e.currentTarget),a=n.find('[name = "name"]'),o=n.find('[name = "phone"]'),i=n.find('[name = "comment"]'),r=n.find('[name = "to"]'),c=$("#modal").find(".modal__content");validateFields(n,[a,o,i,r])&&($.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:a.val(),phone:o.val(),comment:i.val(),to:r.val()},success:function(e){c.text(e.message),$.fancybox.open({src:"#modal",type:"inline"})},error:function(e){var t=e.responseJSON.message;c.text(t),$.fancybox.open({src:"#modal",type:"inline"})}}),t.addClass("overflow"))}),$(".modal").click(function(e){e.preventDefault(),$.fancybox.close()});var init=function(){var e=new ymaps.Map("map",{center:[55.75,37.64],zoom:17,controls:[]}),t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/marker.svg",iconImageSize:[40,42],iconImageOffset:[-3,-42]});[[55.75,37.641],[55.75,37.643],[55.75,37.647],[55.75,37.64]].forEach(function(e){t.add(new ymaps.Placemark(e))}),e.geoObjects.add(t),e.behaviors.disable("scrollZoom")};ymaps.ready(init);var sections=$("section"),display=$(".maincontent"),sideMenu=$(".fixed-menu"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),inScroll=!1;sections.first().addClass("active");var player,countSectionPosition=function(e){var t=-100*e;return isNaN(t)?(console.error("передано не верное значение в countSectionPosition"),0):t},changeFixedMenuTheme=function(e){var t="fixed-menu--shadowed";"black"===sections.eq(e).attr("data-sidemenu-theme")?sideMenu.addClass(t):sideMenu.removeClass(t)},performTransition=function(e){var t;!1===inScroll&&(inScroll=!0,t=countSectionPosition(e),changeFixedMenuTheme(e),display.css({transform:"translateY(".concat(t,"%)")}),sections.eq(e).addClass("active").siblings().removeClass("active"),setTimeout(function(){inScroll=!1,sideMenu.find(".fixed-menu__item").eq(e).addClass("fixed-menu__item--active").siblings().removeClass("fixed-menu__item--active")},700))},scrollViewport=function(e){var t=sections.filter(".active"),n=t.next(),a=t.prev();"next"===e&&n.length&&performTransition(n.index()),"prev"===e&&a.length&&performTransition(a.index())};$(window).on("wheel",function(e){var t=e.originalEvent.deltaY;0<t&&scrollViewport("next"),t<0&&scrollViewport("prev")}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase();if("input"!==t&&"textarea"!==t)switch(e.keyCode){case 38:scrollViewport("prev");break;case 40:scrollViewport("next")}}),$(".wrapper").on("touchmove",function(e){e.preventDefault()}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-scroll-to"),n=$("[data-section-id=".concat(t,"]"));performTransition(n.index())}),isMobile&&$(function(){$("body").swipe({swipe:function(e,t){scrollViewport("down"===t?"prev":"up"===t?"next":"")}})});var playerContainer=$(".player"),volume=$(".player__volume"),volumeNosound=volume.find(".volume__nosound"),eventsInit=function(){$(".player__start").on("click",function(e){e.preventDefault(),playerContainer.hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").click(function(e){var t=$(e.currentTarget),n=e.originalEvent.layerX/t.width()*100,a=player.getDuration()/100*n;$(".player__playback-button").css({left:"".concat(n,"%")}),player.seekTo(a)}),$(".player__splash").click(function(e){player.playVideo()}),$(".volume__icon").click(function(e){e.preventDefault(),volumeNosound.hasClass("volume__nosound--active")?(player.unMute(),volumeNosound.removeClass("volume__nosound--active")):(player.mute(),volumeNosound.addClass("volume__nosound--active"))}),$(".volume__playback").click(function(e){var t=$(e.currentTarget),n=e.originalEvent.layerX/t.width()*100;player.getVolume();$(".volume__playback-button").css({left:"".concat(n,"%")}),player.setVolume(n)})},formatTime=function(e){var t=Math.round(e),n=o(Math.floor(t/60)),a=o(t-60*n);function o(e){return e<10?"0".concat(e):e}return"".concat(n," : ").concat(a)},onPlayerReady=function(){var e,n=player.getDuration();$(".player__duration-estimate").text(formatTime(n)),void 0!==e&&clearInterval(e),e=setInterval(function(){var e=player.getCurrentTime(),t=e/n*100;$(".player__playback-button").css({left:"".concat(t,"%")}),$(".player__duration-completed").text(formatTime(e))},1e3)},onPlayerStateChange=function(e){switch(e.data){case 1:playerContainer.addClass("active"),playerContainer.addClass("paused");break;case 2:playerContainer.removeClass("active"),playerContainer.removeClass("paused")}};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"405",width:"660",videoId:"B7L-W8a4pvM",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disabled:0,rel:0,autoplay:0,showinfo:0,modestbranding:0}})}eventsInit();